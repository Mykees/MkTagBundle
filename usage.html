<!doctype html>
<html class="no-js" lang="">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Usage | Symfony2 Tag Bundle by Mykees</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/app.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,800,300|Karla:400,400italic,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:500' rel='stylesheet' type='text/css'>
</head>
<body>


<div class="page">

    <div class="header header--tag">
        <div class="header__container">
            <h1>Symfony2 <span>TagBundle</span></h1>
        </div>
    </div>

    <div class="content">

        <div class="content_container">
            <div class="nav">
                <a class="nav__link" href="http://Mykees.github.io/MkTagBundle/">Configuration</a>
                <a class="nav__link nav__link--current" href="http://Mykees.github.io/MkTagBundle/usage.html">Usage</a>
                <a class="nav__link" href="http://Mykees.github.io/MkTagBundle/functions.html">Functions</a>
                <a class="nav__link" href="http://Mykees.github.io/MkTagBundle/infos.html">More infos</a>
            </div>

            <div class="content__text">

                <h2 class="title-section">Add tag field</h2>
                <p>In your form type, add tags field (You can add text field options if you need) :</p>

<pre><span class="pl-s1"><span class="pl-smi">$builder</span></span>
<span class="pl-s1">    <span class="pl-k"><span class="light-code">...</span></span></span>

<span class="pl-s1">    <span class="pl-k">-&gt;</span>add(<span class="pl-s"><span class="pl-pds">'</span>tags<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>mk_tag<span class="pl-pds">'</span></span>,[</span>
<span class="pl-s1">        <span class="pl-s"><span class="pl-pds">'</span>label<span class="pl-pds">'</span></span><span class="pl-k">=&gt;</span><span class="pl-s"><span class="pl-pds">'</span>Les Tags:<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">    ])</span>
<span class="pl-s1">;</span></pre>

                <p>Add input text in your template :</p>
                <pre><span class="pl-s1">{{ form_row(<span class="pl-c1">form</span><span class="pl-k">.</span><span class="pl-c1">tags</span>) }}</span></pre>

                <p>Now you can add tags <strong>separated by a comma</strong>.</p>


                <h2 class="title-section">Retrieve Tags</h2>

                <p>In your controller actions, you can use some useful functions for retrieve your tags  :</p>

                <pre><div class="medium-code">// Find tags associated with an entity or array of entities</div><span class="pl-s1"><span class="pl-smi">$this</span><span class="pl-k">-&gt;</span>get(<span class="pl-s"><span class="pl-pds">'</span>mk.tag_manager<span class="pl-pds">'</span></span>)<span class="pl-k">-&gt;</span>findTagRelation(<span class="pl-smi">$model</span>)</span></pre>

                <pre><div class="medium-code">// Find tags by name</div><span class="pl-s1">$tag = <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span>get(<span class="pl-s"><span class="pl-pds">'</span>mk.tag_manager<span class="pl-pds">'</span></span>)<span class="pl-k">-&gt;</span>findByName(<span class="pl-smi">$names</span>)</span></pre>


                <h3 class="sub-section">In your view</h3>
                <p>And in your template you can display the tags like that :</p>
                <pre>{% <span class="pl-k">if</span> post.<span class="pl-smi">getTags</span>() %}
    {% <span class="pl-k">for</span> <span class="pl-smi">tag</span> <span class="pl-k">in</span> <span class="pl-smi">post</span>.<span class="pl-smi">getTags</span> %}
        &lt;<span class="pl-ent">span</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>label label-primary<span class="pl-pds">"</span></span>&gt; {{ <span class="pl-smi">tag</span>.<span class="pl-smi">name</span> }} &lt;/<span class="pl-ent">span</span>&gt;
    {% <span class="pl-k">endfor</span> %}
{% <span class="pl-k">endif</span> %}</pre>


                <h2 class="title-section">Remove Tags</h2>
                <p>For more comfort, removing tags uses <strong>Ajax</strong>.</p>

                <p>In your edit content, add <strong>javascript extension</strong> (don't forget to add jquery in your <strong>default template</strong>) :</p>

<pre><span class="medium-code">// src/YourProject/YourBundle/Resources/views/Blog/edit.html.php

{% extends 'base.html.twig' %}

{% block body %}
.....
{% endblock %}</span>

{% <span class="pl-k">block</span> <span class="pl-smi">javascripts</span> %}
    {{ <span class="pl-c1">parent</span>() }}
    {{ javascript() }}
{% <span class="pl-k">endblock</span> %}
</pre>

                <p>Now you can delete the tags by adding a delete link on them like the following example :</p>
                <pre>{% <span class="pl-k">for</span> <span class="pl-smi">tag</span> <span class="pl-k">in</span> <span class="pl-smi">post</span>.<span class="pl-smi">getTags</span> %}
   {% <span class="pl-k">if</span> <span class="pl-smi">tag</span> %}

       &lt;<span class="pl-ent">span</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>label label-primary<span class="pl-pds">"</span></span>&gt;
       {{ <span class="pl-smi">tag</span>.<span class="pl-smi">name</span> }}

       {% <span class="pl-k">for</span> <span class="pl-smi">tr</span> <span class="pl-k">in</span> <span class="pl-smi">tag</span>.<span class="pl-smi">getTagRelation</span> %}

           &lt;<span class="pl-ent">a</span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>{{ path(<span class="pl-s"><span class="pl-pds">'</span>mykees_tag_delete_relation<span class="pl-pds">'</span></span>,{<span class="pl-s"><span class="pl-pds">'</span>relation_id<span class="pl-pds">'</span></span>:<span class="pl-smi">tr</span>.<span class="pl-smi">id</span>}) }}<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>delTag<span class="pl-pds">"</span></span>&gt;[x]
           &lt;/<span class="pl-ent">a</span>&gt;

       {% <span class="pl-k">endfor</span> %}

       &lt;/<span class="pl-ent">span</span>&gt;
   {% <span class="pl-k">endif</span> %}
{% <span class="pl-k">endfor</span> %}</pre>

            </div>

        </div>

    </div>

    <!--OTHERS PROJECTS-->
    <div class="others__projects">

        <div class="block__projects">
            <h2 class="project__title project__comment">
                <a href="http://mykees.github.io/MkCommentBundle/">
                    <span>Symfony2 CommentBundle</span>
                </a>
            </h2>
        </div>
        <div class="block__projects project__left">
            <h2 class="project__title project__media">
                <a href="http://Mykees.github.io/MkMediaBundle/">
                    <span>Symfony2 MediaBundle</span>
                </a>
            </h2>
        </div>

    </div>

</div>

</body>
</html>
